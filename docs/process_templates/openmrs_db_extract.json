{
   "processType":"DB_EXTRACT",
   "modelType":"OTHER",
   "syncStageSchema":"db_extract_test_stage_area",
   "originAppLocationCode":"db_extract",
   "syncRootDirectory":"",
   "classPath":"",
   "automaticStart":true,
   "resumable":true,
   "params":{
      "endDate":"2024-05-05",
      "locations":"246"
   },
   "appsInfo":[
      {
         "applicationCode":"main",
         "connInfo":{
            "dataBaseUserName":"root",
            "dataBaseUserPassword":"",
            "connectionURI":"jdbc:mysql://localhost:3306/tmp_qlm_hgq?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true",
            "driveClassName":"com.mysql.cj.jdbc.Driver"
         }
      },
      {
         "applicationCode":"destination",
         "connInfo":{
            "dataBaseUserName":"root",
            "dataBaseUserPassword":"",
            "connectionURI":"jdbc:mysql://localhost:3306/extracted_openmrs_db?autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true",
            "driveClassName":"com.mysql.cj.jdbc.Driver"
         }
      }
   ],
   "operations":[
      {
         "operationType":"DB_EXTRACT",
         "maxRecordPerProcessing":50,
         "maxSupportedEngines":1,
         "minRecordsPerEngine":1,
         "disabled":false,
         "processingMode":"sequencial"
      }
   ],
   "etlItemConfiguration":[
      {
         "srcConf":{
            "tableName":"patient",
            "extraConditionForExtract":"patient.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"encounter",
                  "joinExtraCondition":"encounter.voided = 0 and encounter.encounter_type in (5,7) and encounter.encounter_datetime <= @endDate and encounter.location_id IN (@locations)"
               },
               {
                  "tableName":"patient_program",
                  "joinExtraCondition":"patient_program.voided=0 and patient_program.program_id in (1,2) and patient_program.date_enrolled <= @endDate and patient_program.location_id IN (@locations)"
               },
               {
                  "tableName":"encounter",
                  "joinExtraCondition":"encounter.voided = 0 and  encounter.encounter_type IN (53) and encounter.location_id IN (@locations)",
                  "selfJoinTables":[
                     {
                        "tableName":"obs",
                        "joinType":"INNER",
                        "joinExtraCondition":"obs.voided = 0 and obs.concept_id = 23891 and obs.value_datetime <= @endDate"
                     }
                  ]
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         },
         "dstConf":[
            {
               "tableName":"person"
            },
            {
               "tableName":"patient"
            }
         ]
      },
      {
         "srcConf":{
            "tableName":"users",
            "parents":[
               {
                  "tableName":"person",
                  "defaultValueDueInconsistency":1
               },
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"location",
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"patient_program",
            "extraConditionForExtract":"patient_program.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.patient",
                  "joinFields":[
                     {
                        "srcField":"patient_id",
                        "dstField":"patient_id"
                     }
                  ]
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ],
            "observationDateFields":[
               "date_changed",
               "date_voided"
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"person_address",
            "extraConditionForExtract":"person_address.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.person",
                  "joinFields":[
                     {
                        "srcField":"person_id",
                        "dstField":"person_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ],
            "observationDateFields":[
               "date_changed",
               "date_voided"
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"person_attribute",
            "extraConditionForExtract":"person_attribute.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.person",
                  "joinFields":[
                     {
                        "srcField":"person_id",
                        "dstField":"person_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"person"
               },
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"person_name",
            "extraConditionForExtract":"person_name.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.person",
                  "joinFields":[
                     {
                        "srcField":"person_id",
                        "dstField":"person_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"relationship",
            "extraConditionForExtract":"relationship.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.person",
                  "joinFields":[
                     {
                        "srcField":"person_a",
                        "dstField":"person_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"patient_identifier",
            "extraConditionForExtract":"patient_identifier.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.patient",
                  "joinFields":[
                     {
                        "srcField":"patient_id",
                        "dstField":"patient_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ],
            "observationDateFields":[
               "date_changed",
               "date_voided"
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"patient_state",
            "extraConditionForExtract":"patient_state.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.patient_program",
                  "joinFields":[
                     {
                        "srcField":"patient_program_id",
                        "dstField":"patient_program_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"visit",
            "extraConditionForExtract":"visit.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.patient",
                  "joinFields":[
                     {
                        "srcField":"patient_id",
                        "dstField":"patient_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"visit_attribute",
            "extraConditionForExtract":"visit_attribute.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.visit",
                  "joinFields":[
                     {
                        "srcField":"visit_id",
                        "dstField":"visit_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"provider",
            "extraConditionForExtract":"provider.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.person",
                  "joinFields":[
                     {
                        "srcField":"person_id",
                        "dstField":"person_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ],
            "observationDateFields":[
               "date_changed",
               "date_retired"
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"encounter",
            "extraConditionForExtract":"encounter.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.visit",
                  "joinFields":[
                     {
                        "srcField":"visit_id",
                        "dstField":"visit_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"encounter_provider",
            "extraConditionForExtract":"encounter_provider.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.encounter",
                  "joinFields":[
                     {
                        "srcField":"encounter_id",
                        "dstField":"encounter_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"orders",
            "extraConditionForExtract":"orders.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.encounter",
                  "joinFields":[
                     {
                        "srcField":"patient_id",
                        "dstField":"patient_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      },
      {
         "srcConf":{
            "tableName":"obs",
            "extraConditionForExtract":"obs.voided = 0",
            "selfJoinTables":[
               {
                  "tableName":"extracted_openmrs_db.encounter",
                  "joinFields":[
                     {
                        "srcField":"encounter_id",
                        "dstField":"encounter_id"
                     }
                  ]				  
               }
            ],
            "parents":[
               {
                  "tableName":"users",
                  "defaultValueDueInconsistency":1
               }
            ]
         }
      }
   ]
}